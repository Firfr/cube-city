# 源码修改说明

这里记录除了汉化之外的代码修改

## 修复依赖错误

- [项目依赖](package.json)
  - 55 `eslint-plugin-sonarjs`
    - `^0.25.1` => `^1.0.0`

## 设置调试环境

- [配置文件](_config.js)
  - 3 `localhost` => `0.0.0.0`
  - 4 `3000` => `1234`

## 默认语言

- [src/main.js](src/main.js)
  - 15 16 `en` => `zh`
  - 32 `lang` => `'zh'`
- [src/stores/useGameState.js](src/stores/useGameState.js)
  - 28 311 `en` => `zh`

## 远程文件本地化

- [首页](index.html)
  - 19 20 注释
  - 21
    - `https://fonts.googleapis.com/css2?family=Orbitron:wght@400..900&family=ZCOOL+QingKe+HuangYou&display=swap`
    - `assets/font.css`

- [远程字体CSS](src/assets/font.css)
  - 7
    - `https://fonts.gstatic.com/s/orbitron/v35/yMJRMIlzdpvBhQQL_Qq7dy0.woff2`
    - `yMJRMIlzdpvBhQQL_Qq7dy0.woff2`

## 设置相对路径
- [首页](index.html)
  - 15 16 17 27 去掉路径前面的`/`
- [src/components/AudioManager.vue](src/components/AudioManager.vue)
  - 13 去掉路径前面的`/`

## [模式弹窗](src/components/BuildingSidebar.vue)

- 40 行
  - `mode.toUpperCase()`
  - `mode_zhNames[mode] || mode`
- 51-57 行 增加
  ```javascript
  // 添加中文模式名称映射
  const mode_zhNames = {
    build: '建造',
    demolish: '拆除',
    relocate: '搬迁',
    select: '选择'
  }
  ```

## [初始弹窗](src/components/RestorePrompt.vue)

- 89 增加描述
  - `点击右上角音乐按钮`
  - `点击右上角音乐按钮(没有声音，重新关闭在打开)`

